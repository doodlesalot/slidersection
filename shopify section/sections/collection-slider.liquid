<script src="https://cdn.tailwindcss.com"></script>
{{ 'collection-slider.css' | asset_url | stylesheet_tag }}

{%- assign featured_collection = section.settings.featured_collection -%}
{% assign show_ratings = section.settings.show_ratings %}
{% assign show_secondary_image = section.settings.show_secondary_image %}
{% assign productcount = section.settings.productS_to_display %}


<div class="bs-section">
  <div class="bs-header">
    <h2 class="bs-title">{{  featured_collection.title }}</h2>
    <a href="{{ featured_collection.url }}" class="bs-view-all">
      Shop All {{ featured_collection.title }}
      {%- comment %}change this to either translation or section setting {%- endcomment -%}
      <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 12h14M12 5l7 7-7 7"/>
      </svg>
    </a>
  </div>

  <div class="bs-grid" id="bs-grid">
    {% for product in featured_collection.products limit: productcount %}
      {%- if forloop.index > 4 -%}
        {%- assign classes = "hidden-mobile" -%}
        {% comment %} could make "classes" more specific or leave it open for future additions {% endcomment %}
      {%- endif -%}
      {% render 'collection-slider-card', product: product, classes: classes, hoverimg: show_secondary_image, showratings: show_ratings  %}
    {% endfor %}
  </div>

  <div class="bs-track" id="bs-track">
    <div class="bs-thumb" id="bs-thumb"></div>
  </div>

  <button class="bs-show-more" id="bs-show-more" onclick="bsToggle()">Show More</button>
</div>

<script src="{{ 'collection-slider.js' | asset_url }}" defer="defer"></script>

{% schema %}
  {
  "name": "Collection Slider",
  "settings": [
    {
      "type": "collection",
      "id": "featured_collection",
      "label": "Featured collection"
    },
    {
      "type": "checkbox",
      "id": "show_ratings",
      "label": "Show ratings",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "label": "Show second image on hover",
      "default": true
    },
    {
      "type": "range",
      "id": "products_to_display",
      "label": "Products to display",
      "min": 4,
      "max": 20,
      "step": 1,
      "default": 10
    }
  ],
  "presets": [
    {
      "name": "Collection Slider"
    }
  ]
}
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}